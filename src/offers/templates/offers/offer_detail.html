{% extends "base.html" %}
{% load static %}

{% block content %}
  <section class="bg-brand-surface w-[100vw] ml-[calc(50%-50vw)] border-y border-[#cfdffc]" style="padding: 2rem 0;">
    <div class="max-w-5xl mx-auto px-4 flex items-start gap-6 flex-wrap">
      {% if company.logo %}
        <img src="{{ company.logo.url }}" alt="Logo" class="h-20 w-20 object-contain border border-slate-200 rounded-lg bg-white">
      {% endif %}
      <div class="flex-1">
        <h1 class="text-2xl font-bold text-black">{{ offer.title }}</h1>
        <p class="text-slate-600">{{ company.organisation_name }}</p>
        <div class="flex items-center gap-4 text-sm text-slate-500 mt-2">
          <span class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            {{ offer.duration }}
          </span>
          <span class="flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
            {{ offer.location }}
          </span>
        </div>
      </div>
      <div class="flex flex-col gap-3 items-end">
        <a href="{% url 'offers:list' %}" class="px-6 py-2 bg-brand-primary text-white rounded-full hover:bg-brand-primaryDark transition">Retour</a>
      </div>
    </div>
  </section>

  <div class="max-w-5xl mx-auto px-4 py-8">
    <div class="grid md:grid-cols-3 gap-8">
      <div class="md:col-span-2 space-y-6">
        <div>
          <h2 class="text-lg font-bold text-black mb-2">Description :</h2>
          <div class="text-slate-700 prose">{{ offer.description }}</div>
        </div>
      </div>

      <div class="space-y-6">
        <div>
          <h3 class="font-bold text-black mb-2">Tags :</h3>
          <div class="flex flex-wrap gap-2">
            <span class="px-3 py-1 bg-slate-100 border border-slate-300 rounded-full text-sm">{{ offer.get_contract_type_display }}</span>
            {% if offer.start_date %}<span class="px-3 py-1 bg-slate-100 border border-slate-300 rounded-full text-sm">Début : {{ offer.start_date }}</span>{% endif %}
            {% if offer.salary %}<span class="px-3 py-1 bg-slate-100 border border-slate-300 rounded-full text-sm">{{ offer.salary }}</span>{% endif %}
            {% if offer.remote %}<span class="px-3 py-1 bg-slate-100 border border-slate-300 rounded-full text-sm">Télétravail</span>{% endif %}
          </div>
        </div>

        {% if offer.skills %}
        <div>
          <h3 class="font-bold text-black mb-2">Compétences :</h3>
          <div class="flex flex-wrap gap-2">
            {% for skill in offer.skills.split %}
              <span class="px-3 py-1 bg-slate-100 border border-slate-300 rounded-full text-sm">{{ skill }}</span>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        {% if company.description %}
        <div>
          <h3 class="font-bold text-black mb-2">Description de l'entreprise :</h3>
          <div class="text-slate-700 text-sm">{{ company.description }}</div>
        </div>
        {% endif %}
      </div>
    </div>

    {% if user.is_authenticated and user.role == "student" %}
    <div class="mt-10 flex justify-center">
      <a href="#" class="px-10 py-3 bg-brand-primary text-white rounded-full hover:bg-brand-primaryDark transition text-lg font-medium flex items-center gap-2">
        <img src="{% static 'img/paper_plane.png' %}" alt="" class="w-5 h-5">
        Postuler à cette offre
      </a>
    </div>
    {% endif %}
  </div>
{% endblock %}
